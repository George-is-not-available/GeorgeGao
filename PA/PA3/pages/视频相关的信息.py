import streamlit as st
import pandas as pd
from io import StringIO
import numpy as np
from wordcloud import WordCloud
import matplotlib.pyplot as plt
import re
df = pd.read_excel('The data/video_list.xlsx')
df_ = pd.read_excel('The data/data3.xlsx')
df_sorted = df.sort_values(by='Create_time', ascending=False)

# 重置索引为整数
df_sorted.reset_index(drop=True, inplace=True)
# 添加新的整数索引列
df_sorted['index'] = range(1, len(df_sorted) + 1)
# 计算总获赞数
total_likes = df_sorted['Likes'].sum()
total_video_num = 425

# 显示总获赞数
st.write(f"总获赞数: {total_likes}")
# 绘制折线统计图
st.line_chart(df_sorted.set_index('index')[['Likes']])
# 平均每个视频的点赞数
df_num = total_likes / total_video_num
st.write("平均视频点赞数：22074.517647058823")


data_str = '''
2638 5259 3864 1043 5485 2327 5593 1049 4006 10003 1594 403 322 16787 553 3668 1156 2519 3234 8759 1267 9183 4815 2970 5702 4498 3179 7625 5921 12964 2460 18661 2573 24697 3322 6631 1814 8766 859 4127 29552 1438 18226 5311 7775 1433 15214 10299 23846 9632 3279 36291 502 7678 1516 10145 52706 34761 27498 8040 3064 8966 2918 4996 6186 5121 2955 18169 5870 4150 3135 19728 3910 34080 6968 14341 11559 9047 2626 3614 4133 11945 8625 4391 2212 1909 2318 14288 6832 6216 15608 4825 9680 5645 38497 14394 17989 4101 1240 31755 4347 13030 9584 9240 13135 17420 21528 35334 7000 68724 10916 23128 5398 13441 17450 6695 2081 1666 1259 20812 4911 7024 6905 5995 4203 16711 4778 19815 4092 27862 7619 49633 10598 5783 74220 6042 4354 2068 15814 9551 5187 1720 17120 23776 18545 4045 22856 3537 24950 9387 16829 31425 57509 843 1833 47628 23609 36682 29533 4656 52294 26671 6643 11954 29797 1545 3569 5087 51836 993 14799 71751 4219 42500 16887 3212 31355 3118 13410 19681 3409 19000 29463 2768 886 26476 17368 2815 4353 27827 3164 34437 6366 75788 3745 42103 9217 3340 35832 5497 47751 3976 74778 3688 9807 73473 4716 71699 50704 19257 14484 57340 12824 28687 5359 25436 38795 67766 5600 9372 46637 60257 3182 54067 4381 3478 45459 7499 245319 109972 16630 37022 52497 2154 30264 2674 23320 1336 12062 45050 1645 1951 4801 17503 3249 5217 500 8108 559 1976 11345 4014 4448 1624 5186 4858 8774 13926 5436 2565 1697 3655 1094 788 619 1634 22603 5371 1037 365 1736 4590 2259 1568 2126 4801 912 1832 23173 2447 1003 20257 12919 2762 1217 1317 2251 6179 5457 5577 742 8143 1940 694 9708 10267 933 4171 908 7146 7459 2064 9334 367 2547 19226 188355 951 792 10104 14292 4881 11603 659 44905 27757 84824 642 24449 4167 6138 12862 2404 82652 5256 34424 123428 3763 2556 12115 3010 2220 10544 1357 8319 31808 92454 1589 18842 45331 11540 24429 78443 69087 123705 8963 35808 45607 22536 166751 20882 294838 72123 61863 142351 36319 24265 65686 17486 35539 74793 82595 18645 4999 113284 25658 85198 34996 58165 3238 37038 37503 18084 2915 45488 3940 45896 8609 48278 19722 7556 112167 17000 70898 81780 83779 60183 147944 32371 41888 10631 19103 18912 17879 19085 32965 3772 118728 3933 498372 5290 64706 3650 21875 29915 63506 43288 36291 79416 90895 8015 2550 3615 4678 8824 37613 8712 2388 14307 1926 1468 757 1346 814 1004 1350
'''

# Convert the string to a DataFrame
df = pd.read_csv(StringIO(data_str), header=None, names=['values'], sep=' ')

# Get statistics
max_value = df['values'].max()
min_value = df['values'].min()
median_value = df['values'].median()

st.write(f"最大值: "
         f"{max_value}")
st.write(f"最小值: "
         f"{min_value}")
st.write(f"中位数: "
         f"{median_value}")

